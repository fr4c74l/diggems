{% extends "base.html" %}
{% comment %}

Copyright 2011 Lucas Clemente Vella
Software under Affero GPL license, see LICENSE.txt

{% endcomment %}
{% block title %}In-Game{% endblock %}
{% block content %}
<script>
var params = {
"game_id": {{ game_id }},
"state": {{ state }},
"seq_num": {{ seq_num }},
"last_change": "{{ last_change }}",
"channel": "{{ channel }}"{% if p1_last_move %},
"p1_last_move": "{{ p1_last_move }}"{% endif %}{% if p2_last_move %},
"p2_last_move": "{{ p2_last_move }}"{% endif %}{% if mine %},
"mine": "{{ mine }}"{% endif %}{% if player %},
"player": {{ player }}{% if bomb_used %},
"bomb_used": true{% endif %}{% endif %}
};
</script>
<script src="/static/js/game.js"></script>

<div id="game_area">
<canvas id="game_canvas" width="416" height="416">
Atualize seu navegador.
</canvas>
</div>
<img id="bomb" style="visibility:hidden;" src="/static/images/bomb.png" />
<div class="clr"></div>
{% if not player %}<p>Modo espectador.</p>
{% endif %}<p id="message">{% if player and state == 0 %}Envie <a href="{% url diggems.views.join_game game_id %}{% if token %}?token={{ token }}{% endif %}">este link</a> ao seu parceiro para que ele possa entrar no jogo.<br />
{% endif %}</p>
<p>Pontuação:<br />
Jogador Vermelho {% if player == 1 %}(você){% endif %}: <span id="p1_pts">0</span><br />
Jogador Azul {% if player == 2 %}(você){% endif %}: <span id="p2_pts">0</span></p>

{% endblock %}

{% extends "base.html" %}
{% load i18n %}
{% comment %}

Copyright 2011 Lucas Clemente Vella
Software under Affero GPL license, see LICENSE.txt

{% endcomment %}
{% block title %}Index{% endblock %}
{% block header_extra %}
	<link rel="stylesheet" media="screen" type="text/css" href="/static/css/index.css" />
	<link rel="stylesheet" media="screen" type="text/css" href="/static/css/chat.css" />
	<meta property="fb:app_id" content="{{ FB_APP_ID }}" />
	<script src="/static/js/chat.js"></script>
{% endblock %}
{% block content %}
<table>
	<tbody>
		<tr>
			<td class="box" id="new_game">
			  <h1>{% trans "New games" %}</h1>
				<form action="new_game/" method="post">
				    {% trans "Private game" %} <input type="checkbox" name="private" value="1" />
					<input class="button" type="submit" value="Criar!"  style="float: right;"/>
				</form>
			</td>
			<td class="box top" id="your_game" rowspan="2">
			  <h1>{% trans "Your games" %}</h1>
				<ul>
				{% if your_games %}
					{% for g in your_games %}
					<li class="list_games">
					<div style="float:left; padding: 0px 5px 5px 0px;" ><a class="undlin" href="game/{{ g.id }}/">{% trans "Game" %} {{ g.id }}</a></div>
						<div>{% if g.token %}{% trans "Private" %}{% else %}{% trans "Public" %}{% endif %}</div>{% if g.state = 0 %}
						<div>{% trans "Waiting the other player" %}</div>{% else %}
						<div>{% trans "On progress" %}</div>{% endif %}
					</li>{% endfor %}
				{% else %}
				<h4>{% trans "No game found!" %}</h4>
				{% endif %}
				</ul>
			</td>
		</tr>
		<tr>
			<td class="box top" id="join_game">
			  <h1>{% trans "Games to start" %}</h1>
				<ul>
					{% if new_games %}{% for g in new_games %}
					<li class="list_games">
							<div style="float:left;">
								<form action="game/{{ g.id }}/join/" method="post"><input class="button" type="submit" value="{% trans "Join!" %}" /></form>
							</div>
							{% if g.op_picture %}<img style="float:right;" class="middle thumb box" src="{{g.op_picture}}" /> {% endif %}
							<a class="undlin" href="game/{{ g.id }}/">{% trans "Game" %} {{ g.id }}</a>:
							{% trans "Versus" %} {{ g.op_name }}
					</li>
					{% endfor %}{% else %}<h4>{% trans "No game found!" %}</h4>{% endif %}
				</ul>
			</td>
		</tr>
		<tr class="chat">
			<td class="box" colspan="2">
				<h3>{% trans "Global Chat Room " %}</h3>
				<ul id="chat_textfield">
					<!--TODO: <li class="notice">Put chat login/logout messages here!</li> -->
				</ul>
					<span id="chat_username"> {{ user_id }} : </span><input type="text" name="input_message" id="input_field"/>
					<input id="send_button" class="button" type="submit" value="{% trans 'Send' %}" />
			</td>
		</tr>
		<tr>
			<td class="box" colspan="2"><div class="fb-like" data-href="{{ like_url }}" data-send="true" data-show-faces="true"></div></td>
		</tr>
	</tbody>
</table>
{% endblock %}
